% !TEX root = memoria.tex

\documentclass[12pt]{article}

%%% Imports %%%
\usepackage[normalem]{ulem} %% Subrayado multilinea
\usepackage{subfiles} %% Proyecto multi archivo
\usepackage[spanish,es-tabla]{babel} %% Idioma español
\usepackage[utf8]{inputenc} %% Permitir entrada utf-8
\usepackage{marvosym} %% Símbolo €
\usepackage[margin=2cm]{geometry} %% Márgenes
\usepackage{fancyhdr} %% Encabezados y pies de página
\usepackage{titling} %% Portada
\usepackage{csquotes} %% Requerido por biblatex
\usepackage[sorting=none]{biblatex} %% Bibliografía
\usepackage{graphicx} %%Insertar imagenes
\usepackage{float} %% Floats
\usepackage{microtype} %% Justificar cuando hay carácteres especiales
\usepackage[export]{adjustbox}
\usepackage{varwidth}



%%% Configuración del preamble %%%
\input{preamble}

%%% Documento %%%
\begin{document}

%%% Portada %%%
\subfile{sections/0-prev/010-portada.tex}
\thispagestyle{empty}
\newpage

%%% Resumen y Abstract %%%
\section*{Resumen y Abstract}
\subfile{sections/0-prev/020-resumen-y-abstract.tex}
\newpage

%%% Índice de Contenidos %%%
\tableofcontents{}
\newpage

%%% Lista de Acrónimos %%%
\section*{Lista de Acrónimos}
\subfile{sections/0-prev/030-lista-de-acronimos.tex}
\newpage

%%% Introducción %%%
\section{Introducción}
\subfile{sections/1-introduccion/100-introduccion.tex}
\newpage

%%% Antecedentes o Marco Tecnológico %%%
\section{Antecedentes o Marco Tecnológico}
\subfile{sections/2-antecedentes-marco-tecnologico/200-antecedentes-marco-tecnologico.tex}

\subsection{Agricutura de Precisión}
\subfile{sections/2-antecedentes-marco-tecnologico/210-agricultura-de-precision.tex}

\subsection{Internet de las Cosas (IoT)}
\subfile{sections/2-antecedentes-marco-tecnologico/220-internet-de-las-cosas.tex}

\subsection{Computación en la Nube}
\subfile{sections/2-antecedentes-marco-tecnologico/230-computacion-nube.tex}

\subsection{Hardware IoT}
\subfile{sections/2-antecedentes-marco-tecnologico/240-hardware-iot.tex}

\subsection{WIP: Protocolos de Comunicación y Topologías de Red para IoT}
\subfile{sections/2-antecedentes-marco-tecnologico/250-protocolos-topologias.tex}

\subsection{WIP: Ejemplos de Agricultura de Precisión}
\subfile{sections/2-antecedentes-marco-tecnologico/260-ejemplos-agricultura.tex}

%%% Especificaciones y restricciones de diseño %%%
\section{Especificaciones y restricciones de diseño}
\subfile{sections/3-especificaciones-restricciones/300-especificaciones-restricciones.tex}

\subsection{Descripción de las tecnologías y servicios necesarios}
\subfile{sections/3-especificaciones-restricciones/310-descripcion-tecnologias.tex}

\subsubsection{Amazon Web Services (AWS)}
\subfile{sections/3-especificaciones-restricciones/311-aws.tex}

\subsubsection{Terraform}
\subfile{sections/3-especificaciones-restricciones/312-terraform.tex}

\subsubsection{Python y AWS SDK para Python (boto3)}
\subfile{sections/3-especificaciones-restricciones/313-python-aws-sdk.tex}

%%% Descripción de la solución propuesta %%%
\section{Descripción de la solución propuesta}
\subsection{Solución propuesta}
\subfile{sections/4-solucion-propuesta/410-solucion-propuesta.tex}


\subsection{Desarrollo de la solución}
\subsubsection{Configuración inicial. Usuario terraform y credenciales de AWS}
\subfile{sections/4-solucion-propuesta/421-conf-inicial.tex}

\subsubsection{Código de la infraestructura}
\subfile{sections/4-solucion-propuesta/422-codigo-infra.tex}

\subsubsection{Código del simulador}
\subfile{sections/4-solucion-propuesta/423-codigo-simulador.tex}

\subsubsection{Código auxiliar}
\subfile{sections/4-solucion-propuesta/424-codigo-aux.tex}

\subsubsection{Modelado de la base de datos (Elasticsearch)}
\subfile{sections/4-solucion-propuesta/425-modelado-elasticsearch.tex}

\subsection{Despliegue de la solución}
\subfile{sections/4-solucion-propuesta/430-despliegue.tex}

%%% Resultados %%%
\section{Resultados}
%% AQUI METER CAPTURITAS DEL GRAFANA Y EXPLICAR PORQUE USAR GRAFANA PARA MOSTRAR RESULTADOS.
%% AQUI METER  EL TIEMPO QUE SE HA TARDADO EN DESPLEGAR (PONER QUE VARÍA DEPENDIENDO DE AWS PERO LO QUE SE TARDA DE NORMAL)
%% HACER UN PYTHON DE EJEMPLO QUE SE SUSCRIBA A UN TOPIC, ESCRIBIRLE DESDE AWS PARA QUE SE VEA CONECTIVIDAD DE AWS AL DISPOSITIVO

%%% Planos %%%
% \section{Diagramas de arquitectura}

%%% Presupuesto %%%
\section{Presupuesto}
\subfile{sections/6-presupuesto/610-presupuesto.tex}

% 744 * 60 = 44640 minutos por mes

% 1 petición cada 5 segundos = 60/5= 12 peticiones por minuto
% 12 peticiones * 60 = 720 peticiones por hora
% 720 peticiones por hora * 744 horas = 535680 peticiones por mes

% cada ejecución son 0.5 segundos = 267840 GB-segundos

% Lambda:
% Provisioned Capacity = \$0.000004646 * 267840 GB-segundos = \$1.24 al mes
% Peticiones = \$0.20 * 535680/1M = \$0.107136 al mes
% Duration = \$0.0000108407 * 267840 GB-segundos = \$2.9036 al mes
% TOTAL: 4 * (\$1.24 + \$0.107136 + \$2.9036) = \$17 al mes


% IoT:
% Conectividad: \$0.08 * 44640/1M = \$0.035712 al mes
% Mensajes: \$1 *  535680/1M = \$0.53568 al mes
% Reglas: \$0.15 * 535680/1M = \$0.080352 al mes
% TOTAL: 4 * (\$0.035712 + \$0.53568 + \$0.080352) = \$2.61 al mes


% EC2:
% \$0.0126 * 744horas = \$9.37 al mes

%%% Conclusiones %%%
\section{Conclusiones}

%%% Referencias %%%
\setcounter{secnumdepth}{0}
\section{Referencias}
\printbibliography[heading=none]

\end{document}
